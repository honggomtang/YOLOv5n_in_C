# YOLOv5n C 포팅 프로젝트 - Cursor Rules

## 프로젝트 목표 및 환경 (Project Context)

- **최종 목표**: MicroBlaze V (RISC-V) 프로세서가 구현된 FPGA 상에서 실행 가능한 YOLOv5n 추론 엔진을 순수 C로 구현
- **환경 제약**: 
  - 외부 라이브러리(OpenCV, OpenBLAS 등)를 전혀 사용할 수 없는 베어메탈(Bare-metal) 또는 임베디드 환경 타겟
  - Vitis 환경에서 컴파일/실행 가능해야 함
  - 별도의 라이브러리 없이 순수 C 언어만 사용

## 작업 방식 및 가이드라인

### 1. 코드 설명 및 문서화
- 사용자는 코딩 경험이 거의 없으므로, **모든 코드 변경사항에 대해 자세하고 기초적인 설명을 포함**해야 함
- 복잡한 개념이나 알고리즘은 단계별로 설명
- 각 함수/블록의 역할과 동작 방식을 명확히 설명
- 왜 그렇게 구현했는지 이유도 함께 설명

### 2. Git 커밋 및 푸시
- **중요한 변경점이 있을 때마다** 사용자에게 git push를 알림
- 커밋 메시지 예시와 함께 **정확한 명령어를 제공**해야 함
- 예시:
  ```bash
  git add .
  git commit -m "feat: C3 블록 구현 및 검증 완료"
  git push
  ```

### 3. 단계별 검증
- 각 레이어/블록 구현 후 (명령어를 주면)필요시 Python과 비교 검증
- 테스트 코드 작성 및 실행 결과 확인
- 검증 완료 후에만 다음 단계로 진행

### 4. 프로젝트 구조(바뀔 수 있음)
- `csrc/operations/`: 기본 연산 (conv2d, bn_silu, concat, bottleneck 등)
- `csrc/blocks/`: 복합 블록 (conv, c3, sppf 등)
- `csrc/`: 테스트 코드
- `assets/`: 모델 파일 및 가중치 헤더
- `tools/`: Python 유틸리티 (가중치 추출, 테스트 벡터 생성 등)
- `tests/`: 테스트 벤터 및 실행 파일

### 5. 코딩 스타일
- 반말로 간결하게 주석 작성
- 함수명은 명확하고 일관성 있게
- 헤더와 소스 파일은 같은 폴더에 배치 (확장자로 구분)

### 6. 진행 상황 추적
- 각 주요 단계 완료 시 사용자에게 알림
- 다음 단계 계획 명시
- 문제 발생 시 단계별 디버깅 접근

## 참고사항
- YOLOv5n 모델 구조를 정확히 따라야 함
- 각 레이어의 입력/출력 shape를 명확히 확인
- Fused BatchNorm 같은 최적화는 나중에 처리
- 메모리 효율성은 MicroBlaze 포팅 단계에서 최적화
